"use strict";!function(s){var t=null,a=null,e=s(".batchpress"),n=s(".batchpress-upload"),r=s(".batchpress-message"),c=s(".batchpress-log"),o=e.data("nonce");function p(){n.toggleClass("batchpress-show",1===s(this).data("upload")),e.find(".batchpress-button").attr("disabled",!1)}function l(e){a.append("process",e),t=s.ajax({method:"POST",url:ajaxurl,processData:!1,contentType:!1,data:a}).done(d).fail(h)}function i(s){s.preventDefault();var t=e.find("input[name=job]:checked");if((a=new FormData).append("job",t.val()),a.append("nonce",o),a.append("action","batchpress"),a.append("file",null),1===t.data("upload")){var c=n.find("input")[0].files;a.append("file",c.length?c[0]:null),l("upload")}else l("start");e.addClass("batchpress-processing"),r.find(".batchpress-message-job").html(t.data("title")||a.get("job").replaceAll("-"," ")),r.find(".batchpress-message-status").html(r.data("message"))}function u(){try{t.abort()}catch(s){console.error("Abort: ".concat(s))}finally{f(),l("stop"),e.removeClass("batchpress-processing batchpress-error")}}function d(s){if(b(s=g(s)),"processing"===s.status)return l("run")}function h(s){b(g(s)),e.addClass("batchpress-error")}function b(s){if(r.find(".batchpress-message-status").html(s.message),e.addClass("batchpress-"+s.status),s.log){var t=Number(c.find(".batchpress-log-count").html());c.find("ul").append(c.map((function(s){return"<li>".concat(s,"</li>")}))),c.find(".batchpress-log-count").html(t+c.length)}}function f(){c.find("ul").empty(),c.find(".batchpress-log-count").html(0)}function m(){f(),e.removeClass("batchpress-done batchpress-error batchpress-processing")}function g(t){try{return s.parseJSON(t)}catch(s){return{status:"error",message:s}}}e.on("click",".batchpress-option",p),e.on("submit",".batchpress-form",i),e.on("click",".batchpress-stop",u),e.on("click",".batchpress-back",m)}(jQuery);
//# sourceMappingURL=admin.min.js.map