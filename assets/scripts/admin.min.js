"use strict";!function(s){var t=null,r=null,n=s(".batchpress"),c=s(".batchpress-message"),e=s(".batchpress-errors"),a=n.find(".batchpress-form").data("nonce");function o(){n.find(".batchpress-button").attr("disabled",!1)}function i(n){r=s.post(ajaxurl,{action:"batchpress",job:t,nonce:a,process:n}).done(u).fail(b)}function l(s){s.preventDefault(),t=n.find("input[name=job]:checked").val(),i("start"),n.addClass("batchpress-processing"),c.html("<small>".concat(t,"</small> ").concat(c.data("message")))}function p(){try{r.abort()}catch(s){console.error("Abort: ".concat(s))}finally{d(),i("stop"),n.removeClass("batchpress-processing batchpress-error")}}function u(s){if(h(s=g(s)),"processing"===s.status)return i("run")}function b(s){h(g(s)),n.addClass("batchpress-error")}function h(s){c.html("<small>".concat(t,"</small> ").concat(s.message)),n.addClass("batchpress-"+s.status),f(s.errors)}function f(s){var t=Number(e.find(".batchpress-errors-count").html());e.find("ul").append(s.map((function(s){return"<li>".concat(s,"</li>")}))),e.find(".batchpress-errors-count").html(t+s.length)}function d(){e.find("ul").empty(),e.find(".batchpress-errors-count").html(0)}function m(){d(),n.removeClass("batchpress-done batchpress-error batchpress-processing")}function g(t){try{return s.parseJSON(t)}catch(s){return{status:"error",message:s}}}n.on("click",".batchpress-option",o),n.on("submit",".batchpress-form",l),n.on("click",".batchpress-stop",p),n.on("click",".batchpress-back",m)}(jQuery);
//# sourceMappingURL=admin.min.js.map