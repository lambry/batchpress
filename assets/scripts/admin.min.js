"use strict";!function(s){var e=null,t=null,a=s(".batchpress"),r=s(".batchpress-upload"),n=s(".batchpress-message"),c=s(".batchpress-errors"),o=a.data("nonce");function p(){r.toggleClass("batchpress-show",1===s(this).data("upload")),a.find(".batchpress-button").attr("disabled",!1)}function i(a){t.append("process",a),e=s.ajax({method:"POST",url:ajaxurl,processData:!1,contentType:!1,data:t}).done(d).fail(h)}function l(s){s.preventDefault();var e=a.find("input[name=job]:checked");if((t=new FormData).append("job",e.val()),t.append("nonce",o),t.append("action","batchpress"),t.append("file",null),1===e.data("upload")){var c=r.find("input")[0].files;t.append("file",c.length?c[0]:null),i("upload")}else i("start");a.addClass("batchpress-processing"),n.find(".batchpress-message-job").html(t.get("job").replace("-"," ")),n.find(".batchpress-message-status").html(n.data("message"))}function u(){try{e.abort()}catch(s){console.error("Abort: ".concat(s))}finally{m(),i("stop"),a.removeClass("batchpress-processing batchpress-error")}}function d(s){if(b(s=v(s)),"processing"===s.status)return i("run")}function h(s){b(v(s)),a.addClass("batchpress-error")}function b(s){n.find(".batchpress-message-status").html(s.message),a.addClass("batchpress-"+s.status),f(s.errors)}function f(s){var e=Number(c.find(".batchpress-errors-count").html());c.find("ul").append(s.map((function(s){return"<li>".concat(s,"</li>")}))),c.find(".batchpress-errors-count").html(e+s.length)}function m(){c.find("ul").empty(),c.find(".batchpress-errors-count").html(0)}function g(){m(),a.removeClass("batchpress-done batchpress-error batchpress-processing")}function v(e){try{return s.parseJSON(e)}catch(s){return{status:"error",message:s}}}a.on("click",".batchpress-option",p),a.on("submit",".batchpress-form",l),a.on("click",".batchpress-stop",u),a.on("click",".batchpress-back",g)}(jQuery);
//# sourceMappingURL=admin.min.js.map